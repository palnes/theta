import { Meta } from '@storybook/addon-docs/blocks';
import { getSemanticColors } from '../helpers/tokenHelpers';
import { Section } from '../helpers/DocComponents';
import { TokenReferenceTable } from '../helpers/TokenReferenceTable';
import { useDocumentationData } from '../helpers/useDocumentationData';
import { ColorDisplay } from '../helpers/components/ColorDisplay';

<Meta title="Token Reference/Semantic/Colors" />

# Semantic Color System

Colors for UI elements like backgrounds, text, borders, and actions. They reference the primitive colors and can change with themes.

export const AllSemanticColors = () => {
  const { data, loading, error } = useDocumentationData();
  
  if (loading) return <div>Loading semantic colors...</div>;
  if (error) return <div>Error loading colors: {error}</div>;
  if (!data) return null;
  
  const categories = getSemanticColors(data.sys?.color || []);
  
  return (
    <>
      {categories.map(category => {
        // Flatten the nested structure into a simple array of tokens
        const tokens = [];
        
        const processColors = (colors, prefix = '') => {
          Object.entries(colors).forEach(([key, value]) => {
            // If it has states (default, hover, etc.)
            if (value && typeof value === 'object' && value.default) {
              Object.entries(value).forEach(([state, token]) => {
                if (token && token.cssVariable) {
                  tokens.push({
                    name: `${key} ${state}`,
                    value: token.$value || token.value,
                    cssVariable: token.cssVariable,
                    jsPath: token.jsPath || `sys.color.${category.name}.${key}.${state}`,
                    jsFlat: token.jsFlat,
                    path: `sys.color.${category.name}.${key}.${state}`
                  });
                }
              });
            } 
            // If it's a direct token
            else if (value && value.$type && value.$value) {
              tokens.push({
                name: key,
                value: value.$value,
                cssVariable: value.cssVariable || `--sys-color-${category.name}-${key}`,
                jsPath: value.jsPath || `sys.color.${category.name}.${key}`,
                jsFlat: value.jsFlat,
                path: `sys.color.${category.name}.${key}`
              });
            }
            // If it's a nested structure, recurse
            else if (value && typeof value === 'object') {
              processColors(value, `${prefix}${key}.`);
            }
          });
        };
        
        processColors(category.colors);
        
        return (
          <Section key={category.name}>
            <ColorDisplay
              title={category.label}
              tokens={tokens}
              isTextPreview={category.name === 'text'}
              gridColumns="large"
              groupBy={category.name === 'status' || category.name === 'state' ? 'category' : 'none'}
            />
          </Section>
        );
      })}
    </>
  );
};

<AllSemanticColors />


## Semantic Categories
Semantic colors express intent:
- **action**: Interactive elements (buttons, links)
- **surface**: Background surfaces
- **text**: Text colors
- **border**: Border colors
- **icon**: Icon colors
- **state**: Success, warning, error, info states
- **semantic**: Status colors (success, warning, error)
- **interaction**: Subtle interactive surfaces

## Reference Table

Complete listing of all semantic color tokens:

<TokenReferenceTable tier="sys" category="color" />